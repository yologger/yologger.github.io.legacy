
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Yologger&#39;s Blog">
    <title>태그: Android - Yologger&#39;s Blog</title>
    <meta name="author" content="yologger">
    
    
        <link rel="icon" href="https://yologger.github.io/ko/assets/images/favicon.png">
    
    
    <script type="application/ld+json">{}</script>
    <meta name="description" content="Yologger&#39;s Blog">
<meta property="og:type" content="blog">
<meta property="og:title" content="Yologger&#39;s Blog">
<meta property="og:url" content="https://yologger.github.io/ko/tags/Android/page/8/index.html">
<meta property="og:site_name" content="Yologger&#39;s Blog">
<meta property="og:description" content="Yologger&#39;s Blog">
<meta property="og:locale" content="ko_KR">
<meta property="article:author" content="yologger">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/ko/assets/css/style-mg0ufdhe3lf13uaqzh5sfd3dtbhx3iokplil152c5hqau8lqr315qgpxsjvw.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QYKNWR810R"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-QYKNWR810R');
    </script>


    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/ko/"
            aria-label=""
        >
            Yologger&#39;s Blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="링크 열기: /ko/#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://yologger.github.io"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="English"
                        >
                        <i class="sidebar-button-icon fa fa-globe" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">English</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/ko/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/ko/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/ko/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/ko/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/yologger"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/ko/mailto"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/ko/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/ko/java"
                            
                            rel="noopener"
                            title="Java"
                        >
                        <i class="sidebar-button-icon fab fa-java" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Java</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/ko/kotlin"
                            
                            rel="noopener"
                            title="Kotlin"
                        >
                        <i class="sidebar-button-icon fab fa-korvue" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Kotlin</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/ko/android"
                            
                            rel="noopener"
                            title="Android"
                        >
                        <i class="sidebar-button-icon fab fa-android" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Android</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/ko/spring"
                            
                            rel="noopener"
                            title="Spring"
                        >
                        <i class="sidebar-button-icon fas fa-leaf" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Spring</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/ko/devops"
                            
                            rel="noopener"
                            title="DevOps"
                        >
                        <i class="sidebar-button-icon fa fa-cogs" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">DevOps</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/ko/tools"
                            
                            rel="noopener"
                            title="Tools"
                        >
                        <i class="sidebar-button-icon fa fa-wrench" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tools</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/ko/algorithm"
                            
                            rel="noopener"
                            title="Algorithm"
                        >
                        <i class="sidebar-button-icon fas fa-project-diagram" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Algorithm</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/ko/2019/06/09/08_android/01_android_platform/190609_jvm_dalvik_art/"
                            aria-label=": [Android] JVM, 달빅 가상머신, ART 차이점"
                        >
                            [Android] JVM, 달빅 가상머신, ART 차이점
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-06-09T01:00:00+09:00">
	
		    2019/06/09
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/ko/categories/Android/">Android</a>, <a class="category-link" href="/ko/categories/Android/Android-Platform/">Android Platform</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <hr>
<h1 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h1><p><code>JVM(Java Virtual Machine)</code>은 Java 바이트코드를 실행하는 가상머신입니다. </p>
<p><img src="1.png"></p>
<p><code>Java Compiler</code>는 Java 소스코드를 컴파일하여 Java 바이트코드를 생성합니다. JVM은 이 <u>Java 바이트코드를 실행하는 주체</u>입니다. 플랫폼에 적절한 JVM만 설치되면 어떤 플랫폼에서든 Java 바이트코드를 실행할 수 있습니다.</p>
<h1 id="DVM"><a href="#DVM" class="headerlink" title="DVM"></a>DVM</h1><p><code>DEX 컴파일러</code>는 Java 바이트코드를 <code>DEX(Dalvik Executable)</code>파일로 통합합니다.<br><img src="2.png"></p>
<p><code>DVM(Dalvik Virtual Machine)</code>은 안드로이드 애플리캐이션을 실행하는 주체입니다. 정확하게 말하자면 DVM는 이 DEX 파일을 실행합니다.</p>
<p>구글은 자바 가상머신인 JVM을 사용할 수도 있었지만 오라클과의 라이센스 문제 때문에 DVM을 개발하여 안드로이드에 넣게 됩니다.</p>
<p>뿐만 아니라 모바일 기기는 베터리 수명, 컴퓨팅 능력, 메모리 등의 자원이 데스크탑 환경에 비해 열악합니다. 이 때문에 모바일 기기에 맞게 나온 가상머신이 바로 DVM 입니다.</p>
<p>DVM은 내부적으로 <code>JIT(Just In Time) 컴파일러</code>를 사용합니다. 이 컴파일러는 애플리캐이션을 <u>실행</u>할 때마다 자바 바이트코드를 기계어로 컴파일합니다. 이 덕분에 설치 파일은 작아졌으나 CPU, 메모리, 베터리 사용이 높아지게 되었습니다.</p>
<h1 id="ART"><a href="#ART" class="headerlink" title="ART"></a>ART</h1><p><code>ART(Android Runtime)</code>은 안드로이드에서 사용되던 기존 DVM의 한계점을 해결하기 위해서 구글에서 새로 개발한 런타임입니다.</p>
<p>ART는 내부적으로 <code>AOT(Ahead On Time) 컴파일러</code>를 사용합니다. 이 컴파일러는 애플리캐이션을 <u>설치</u>할 때 자바 바이트코드를 기계어로 컴파일합니다. 따라서 설치 파일이 커지고 설치 시간이 오래 걸린다는 단점이 있으나 런타임에서 CPU, 메모리, 베터리 사용량이 낮아지고 퍼포먼스가 좋아지게 되었습니다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/ko/2019/06/09/08_android/01_android_platform/190609_jvm_dalvik_art/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/ko/2019/06/08/08_android/01_android_platform/190606_dex_compiler/"
                            aria-label=": [Android] DEX 컴파일러"
                        >
                            [Android] DEX 컴파일러
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-06-08T01:00:00+09:00">
	
		    2019/06/08
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/ko/categories/Android/">Android</a>, <a class="category-link" href="/ko/categories/Android/Android-Platform/">Android Platform</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <hr>
<h1 id="DEX-컴파일러"><a href="#DEX-컴파일러" class="headerlink" title="DEX 컴파일러"></a>DEX 컴파일러</h1><p><code>DEX 컴파일러</code>는 자바 바이트코드를 안드로이드 시스템에서 실행 가능한 DEX 파일로 변환합니다. DEX 컴파일러는 오랜 시간에 걸쳐 발전해왔습니다.</p>
<h3 id="1-DX-컴파일러"><a href="#1-DX-컴파일러" class="headerlink" title="(1) DX 컴파일러"></a>(1) DX 컴파일러</h3><p>D8 컴파일러가 출시되기 전까지 사용되었던 DEX 컴파일러입니다.</p>
<h3 id="2-D8-컴파일러"><a href="#2-D8-컴파일러" class="headerlink" title="(2) D8 컴파일러"></a>(2) D8 컴파일러</h3><p>구글이 2018년 출시한 새로운 DEX 컴파일러입니다. <code>Android Studio 3.0 버전</code>부터 사용할 수 있으며, <code>Android Studio 3.1 버전</code>부터 기본 DEX 컴파일러가 되었습니다. DEX 컴파일러는 <code>Android Gradle Plugin</code>에 포함되어있습니다.</p>
<h3 id="3-R8-컴파일러"><a href="#3-R8-컴파일러" class="headerlink" title="(3) R8 컴파일러"></a>(3) R8 컴파일러</h3><p>구글이 2019년 출시한 새로운 DEX 컴파일러입니다. <code>Android Stuido 3.4 버전</code>부터 사용할 수 있습니다. R8 컴파일러는 프로가드(ProGurad)가 기존에 수행하던 <u>코드 난독화</u> 및 <u>최적화 작업</u>을 대신 수행합니다. 따라서 <code>Android Gradle Plugin 3.4.0</code> 버전부터는 ProGuard 대신 R8 컴파일러를 사용하여 코드 난독화와 최적화 작업을 수행할 수 있습니다.</p>
<p>R8 컴파일러 이전에는 DEX 파일을 생성하는 과정이 두 단계로 나누어 있었습니다.</p>
<ol>
<li>프로가드(ProGurad)가 수행하는 난독화와 최적화 작업</li>
<li>D8 컴파일러가 수행하는 DEX 컴파일 </li>
</ol>
<p><img src="1.png"></p>
<p>R8 컴파일러는 이 두 과정을 한 단계로 통합했습니다.</p>
<p><img src="2.png"></p>
<p>프로가드와 D8 컴파일러 대신 R8 컴파일러를 사용하는 것은 매우 간단합니다. <code>gradle.properties</code>파일에 다음 한 줄을 추가하면 됩니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android.enableR8=true</span><br></pre></td></tr></table></figure>
<p>이 코드를 추가하면 <code>Android Gradle Plugin 3.4.0</code> 버전부터는 ProGuard 대신 R8 컴파일러를 사용하여 코드 난독화와 최적화 작업을 수행합니다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/ko/2019/06/08/08_android/01_android_platform/190606_dex_compiler/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/ko/2019/06/05/08_android/01_android_platform/190605_proguard/"
                            aria-label=": [Android] 프로가드(ProGuard) - 코드 난독화 및 최적화"
                        >
                            [Android] 프로가드(ProGuard) - 코드 난독화 및 최적화
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-06-05T01:00:00+09:00">
	
		    2019/06/05
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/ko/categories/Android/">Android</a>, <a class="category-link" href="/ko/categories/Android/Android-Platform/">Android Platform</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <hr>
<h1 id="프로가드"><a href="#프로가드" class="headerlink" title="프로가드"></a>프로가드</h1><p><code>프로가드(ProGuard)</code>를 적용하면 어플리캐이션에 <u>코드 난독화</u>와 <u>최적화</u>를 적용할 수 있습니다. 프로가드를 이해하기 위해 알아야 할 개념은 다음과 같습니다.</p>
<h3 id="1-역공학과-디컴파일"><a href="#1-역공학과-디컴파일" class="headerlink" title="(1) 역공학과 디컴파일"></a>(1) 역공학과 디컴파일</h3><p><code>역공학(Reverse Engineering)</code>은 <u>완성된 결과물을 반대로 분해하고 조각내어 설계와 원리를 분석하는 것</u>을 의미합니다. 비유하자면 완성된 비행기를 분해하며 어떻게 조립되었고 동작하는지를 분석하는 것입니다.</p>
<p>소프트웨어 공학에서 역공학의 핵심 기술은 디컴파일입니다. <code>디컴파일(Decompile)</code>은 <u>실행 가능한 소프트웨어를 사람이 읽을 수 있는 소스코드로 변환하는 것</u>을 말합니다. 안드로이드에서는 APK 파일을 사용하여 소스코드 파일로 복원하는 작업을 의미합니다. 컴파일이나 빌드의 반대 작업이라고 이해하시면 됩니다.</p>
<h3 id="2-난독화"><a href="#2-난독화" class="headerlink" title="(2) 난독화"></a>(2) 난독화</h3><p>APK 파일을 추출하는 앱을 사용하면 구글 플레이스토어에서 다운받은 앱의 APK 파일을 추출할 수 있습니다. 여기에 디컴파일까지 적용하면 앱의 소스코드를 볼 수 있게 됩니다.</p>
<p><code>코드 난독화(Code Obfuscation)</code>은 악의적으로 앱의 소스코드에 접근하는 공격자로부터 코드를 보호하는 기술입니다. <u>소스코드를 읽기 어렵게 만들어 가독성을 떨어지게 할 수 있습니다</u>.</p>
<h3 id="3-코드-축소와-리소스-축소"><a href="#3-코드-축소와-리소스-축소" class="headerlink" title="(3) 코드 축소와 리소스 축소"></a>(3) 코드 축소와 리소스 축소</h3><p>코드에서 사용하지 않는 클래스, 속성, 메소드를 탐지하여 안전하게 삭제하는 것을 <code>코드 축소(Code shrinking)</code>라고 합니다. 또한 앱에서 사용하지 않는 리소스를 안전하게 삭제하는 것을 <code>리소스 축소(Resource shrinking)</code>라고 합니다. </p>
<hr>
<h1 id="프로가드-사용법"><a href="#프로가드-사용법" class="headerlink" title="프로가드 사용법"></a>프로가드 사용법</h1><p><code>프로가드(ProGuard)</code>를 사용하면 빌드 타입별로 난독화, 코드 축소, 리소스 축소를 적용할 수 있습니다.</p>
<p>모듈 수준의 <code>build.gradle</code>에 두 개의 빌드 타입 <code>debug</code>, <code>release</code>를 추가합니다.</p>
<figure class="highlight plaintext"><figcaption><span>수준의 build.gradle</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        debug &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        release &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>release</code>빌드 타입에 프로가드를 적용하겠습니다. <code>minifyEnabled</code>값을 <code>true</code>로 설정하면 난독화, 코드 축소, 최적화를 진행합니다.</p>
<figure class="highlight plaintext"><figcaption><span>수준의 build.gradle</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        debug &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled true</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>shrinkResources</code>값을 <code>true</code>로 설정하면 리소스 축소가 적용됩니다.</p>
<figure class="highlight plaintext"><figcaption><span>수준의 build.gradle</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        debug &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        release &#123;</span><br><span class="line">            shrinkResources true</span><br><span class="line">            minifyEnabled true</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>proguardFiles</code> 속성을 사용하여 난독화에 사용할 파일을 여러 개 지정할 수 있습니다. 아래 코드는 두 개의 파일을 지정하고 있습니다.</p>
<figure class="highlight plaintext"><figcaption><span>수준의 build.gradle</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        debug &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        release &#123;</span><br><span class="line">            proguardFiles getDefaultProguardFile(&#x27;proguard-android-optimize.txt&#x27;), &#x27;proguard-rules.pro&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>위 코드는 아래 코드와 동일합니다.</p>
<figure class="highlight plaintext"><figcaption><span>수준의 build.gradle</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        debug &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        release &#123;</span><br><span class="line">            // proguardFiles getDefaultProguardFile(&#x27;proguard-android-optimize.txt&#x27;), &#x27;proguard-rules.pro&#x27;</span><br><span class="line">            proguardFile getDefaultProguardFile(&#x27;proguard-android-optimize.txt&#x27;)</span><br><span class="line">            proguardFile &#x27;proguard-rules.pro&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>proguard-android-optimize.txt</code>은 안드로이드 그래들 플러그인이 자동으로 생성합니다.</p>
<figure class="highlight plaintext"><figcaption><span>수준의 build.gradle</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line"></span><br><span class="line">    dependencies &#123;</span><br><span class="line">        // 안드로이드 그래이들 플러그인</span><br><span class="line">        classpath &quot;com.android.tools.build:gradle:4.1.2&quot;</span><br><span class="line">        // ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이 파일에는 사전에 정해진 합리적인 규칙이 정의되어있습니다. 따라서 개발자는 이 파일을 수정할 필요가 없습니다.</p>
<p><code>proguard-rules.pro</code>는 안드로이드 프로젝트나 모듈을 생성하면 모듈의 루트 디렉토리에 자동으로 생성됩니다.<br><img src="1.png"><br><img src="2.png"><br>개발자는 이 파일을 수정하여 프로가드 규칙을 적용할 수 있습니다.</p>
<hr>
<h1 id="프로가드-설정파일"><a href="#프로가드-설정파일" class="headerlink" title="프로가드 설정파일"></a>프로가드 설정파일</h1><p><code>proguard-rules.pro</code>를 프로가드 설정파일이라고 합니다. 이 파일에서는 특정 클래스나 멤버변수를 난독화에서 제외한다든지, 최적화를 진행하지 않는다든지, 코드 축소를 하지 않는다든지 등의 <u><b>규칙</b></u>을 설정을 할 수 있습니다. </p>
<p>자주 사용하는 프로가드 <u><b>규칙</b></u>은 다음과 같습니다.</p>
<ul>
<li><code>keepclass [패키지명]</code>: 특정 패키지 난독화에서 제외</li>
<li><code>keepclassmembers</code>: 클래스 멤버의 원 상태 유지</li>
<li><code>keepattributes</code>: 소스코드, 라인정보 유지</li>
<li><code>dontoptimize</code>: 최적화 하지 않기</li>
<li><code>dontshrink</code>: 사용하지 않는 메소드 코드 축소 하지 않기</li>
<li><code>ignorewarning</code>: 경고 무시</li>
<li><code>dontwarn [패키지명]</code>: 특정 패키지에 대한 경고 무시</li>
</ul>
<p>프로가드의 모든 규칙은 <a target="_blank" rel="noopener" href="https://www.guardsquare.com/manual/configuration/usage">이 곳</a>에서 확인할 수 있습니다.</p>
<h1 id="외부-라이브러리에-프로가드-적용하기"><a href="#외부-라이브러리에-프로가드-적용하기" class="headerlink" title="외부 라이브러리에 프로가드 적용하기"></a>외부 라이브러리에 프로가드 적용하기</h1><p>안드로이드 개발을 하다보면 다양한 <u>외부 라이브러리</u>를 사용하게 됩니다. 프로가드와 외부 라이브러리를 함께 사용하는 경우, 외부 라이브러리에 대한 프로가드 설정이 필요한지를 라이브러리 공식 홈페이지에서 꼭 확인하시기 바랍니다.</p>
<h3 id="1-Retrofit"><a href="#1-Retrofit" class="headerlink" title="(1) Retrofit"></a>(1) Retrofit</h3><p><code>Retrofit</code>은 HTTP 통신 라이브러리입니다. <code>Retrofit</code>을 사용하기 위해 프로가드에 추가 설정이 필요합니다. <a target="_blank" rel="noopener" href="https://square.github.io/retrofit/">Retrofit 공식 홈페이지</a>에서 <a target="_blank" rel="noopener" href="https://github.com/square/retrofit/blob/master/retrofit/src/main/resources/META-INF/proguard/retrofit2.pro">프로가드 설정 파일</a>을 제공하고 있습니다. 해당 파일을 <code>proguard-rules.pro</code>에 복사해줍니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"># Retrofit does reflection on generic parameters. InnerClasses is required to use Signature and</span><br><span class="line"># EnclosingMethod is required to use InnerClasses.</span><br><span class="line">-keepattributes Signature, InnerClasses, EnclosingMethod</span><br><span class="line"></span><br><span class="line"># Retrofit does reflection on method and parameter annotations.</span><br><span class="line">-keepattributes RuntimeVisibleAnnotations, RuntimeVisibleParameterAnnotations</span><br><span class="line"></span><br><span class="line"># Keep annotation default values (e.g., retrofit2.http.Field.encoded).</span><br><span class="line">-keepattributes AnnotationDefault</span><br><span class="line"></span><br><span class="line"># Retain service method parameters when optimizing.</span><br><span class="line">-keepclassmembers,allowshrinking,allowobfuscation interface * &#123;</span><br><span class="line">    @retrofit2.http.* &lt;methods&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># Ignore annotation used for build tooling.</span><br><span class="line">-dontwarn org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement</span><br><span class="line"></span><br><span class="line"># Ignore JSR 305 annotations for embedding nullability information.</span><br><span class="line">-dontwarn javax.annotation.**</span><br><span class="line"></span><br><span class="line"># Guarded by a NoClassDefFoundError try/catch and only used when on the classpath.</span><br><span class="line">-dontwarn kotlin.Unit</span><br><span class="line"></span><br><span class="line"># Top-level functions that can only be used by Kotlin.</span><br><span class="line">-dontwarn retrofit2.KotlinExtensions</span><br><span class="line">-dontwarn retrofit2.KotlinExtensions$*</span><br><span class="line"></span><br><span class="line"># With R8 full mode, it sees no subtypes of Retrofit interfaces since they are created with a Proxy</span><br><span class="line"># and replaces all potential values with null. Explicitly keeping the interfaces prevents this.</span><br><span class="line">-if interface * &#123; @retrofit2.http.* &lt;methods&gt;; &#125;</span><br><span class="line">-keep,allowobfuscation interface &lt;1&gt;</span><br><span class="line"></span><br><span class="line"># Keep generic signature of Call (R8 full mode strips signatures from non-kept items).</span><br><span class="line">-keep,allowobfuscation,allowshrinking interface retrofit2.Call</span><br></pre></td></tr></table></figure>


<h3 id="2-OkHttp"><a href="#2-OkHttp" class="headerlink" title="(2) OkHttp"></a>(2) OkHttp</h3><p><a target="_blank" rel="noopener" href="https://github.com/square/okhttp/blob/master/okhttp/src/main/resources/META-INF/proguard/okhttp3.pro">OkHttp의 GitHub 저장소</a>에서 확인할 수 있습니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># JSR 305 annotations are for embedding nullability information.</span><br><span class="line">-dontwarn javax.annotation.**</span><br><span class="line"></span><br><span class="line"># A resource is loaded with a relative path so the package of this class must be preserved.</span><br><span class="line">-keepnames class okhttp3.internal.publicsuffix.PublicSuffixDatabase</span><br><span class="line"></span><br><span class="line"># Animal Sniffer compileOnly dependency to ensure APIs are compatible with older versions of Java.</span><br><span class="line">-dontwarn org.codehaus.mojo.animal_sniffer.*</span><br><span class="line"></span><br><span class="line"># OkHttp platform used only on JVM and when Conscrypt dependency is available.</span><br><span class="line">-dontwarn okhttp3.internal.platform.ConscryptPlatform</span><br><span class="line">-dontwarn org.conscrypt.ConscryptHostnameVerifier</span><br></pre></td></tr></table></figure>

<h3 id="3-Glide"><a href="#3-Glide" class="headerlink" title="(3) Glide"></a>(3) Glide</h3><p><a target="_blank" rel="noopener" href="https://github.com/bumptech/glide#proguard">Glide의 GitHub 저장소</a>에서 확인할 수 있습니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-keep public class * implements com.bumptech.glide.module.GlideModule</span><br><span class="line">-keep class * extends com.bumptech.glide.module.AppGlideModule &#123;</span><br><span class="line"> &lt;init&gt;(...);</span><br><span class="line">&#125;</span><br><span class="line">-keep public enum com.bumptech.glide.load.ImageHeaderParser$** &#123;</span><br><span class="line">  **[] $VALUES;</span><br><span class="line">  public *;</span><br><span class="line">&#125;</span><br><span class="line">-keep class com.bumptech.glide.load.data.ParcelFileDescriptorRewinder$InternalRewinder &#123;</span><br><span class="line">  *** rewind();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># for DexGuard only</span><br><span class="line">-keepresourcexmlelements manifest/application/meta-data@value=GlideModule</span><br></pre></td></tr></table></figure>

<h3 id="4-Gson"><a href="#4-Gson" class="headerlink" title="(4) Gson"></a>(4) Gson</h3><p><a target="_blank" rel="noopener" href="https://github.com/google/gson/blob/master/examples/android-proguard-example/proguard.cfg">Gson의 GitHub 저장소</a>에서 확인할 수 있습니다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">##---------------Begin: proguard configuration for Gson  ----------</span><br><span class="line"># Gson uses generic type information stored in a class file when working with fields. Proguard</span><br><span class="line"># removes such information by default, so configure it to keep all of it.</span><br><span class="line">-keepattributes Signature</span><br><span class="line"></span><br><span class="line"># For using GSON @Expose annotation</span><br><span class="line">-keepattributes *Annotation*</span><br><span class="line"></span><br><span class="line"># Gson specific classes</span><br><span class="line">-dontwarn sun.misc.**</span><br><span class="line">#-keep class com.google.gson.stream.** &#123; *; &#125;</span><br><span class="line"></span><br><span class="line"># Application classes that will be serialized/deserialized over Gson</span><br><span class="line">-keep class com.google.gson.examples.android.model.** &#123; &lt;fields&gt;; &#125;</span><br><span class="line"></span><br><span class="line"># Prevent proguard from stripping interface information from TypeAdapter, TypeAdapterFactory,</span><br><span class="line"># JsonSerializer, JsonDeserializer instances (so they can be used in @JsonAdapter)</span><br><span class="line">-keep class * extends com.google.gson.TypeAdapter</span><br><span class="line">-keep class * implements com.google.gson.TypeAdapterFactory</span><br><span class="line">-keep class * implements com.google.gson.JsonSerializer</span><br><span class="line">-keep class * implements com.google.gson.JsonDeserializer</span><br><span class="line"></span><br><span class="line"># Prevent R8 from leaving Data object members always null</span><br><span class="line">-keepclassmembers,allowobfuscation class * &#123;</span><br><span class="line">  @com.google.gson.annotations.SerializedName &lt;fields&gt;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">##---------------End: proguard configuration for Gson  ----------</span><br></pre></td></tr></table></figure>

<h1 id="프로가드-설정파일-분리하기"><a href="#프로가드-설정파일-분리하기" class="headerlink" title="프로가드 설정파일 분리하기"></a>프로가드 설정파일 분리하기</h1><p>외부 라이브러리에 따라 프로가드 설정파일을 분리하는 것을 권장합니다.</p>
<p>모듈의 루트 디렉토리에 다음 다섯 개의 프로가드 설정파일을 생성합니다.</p>
<ul>
<li>proguard-common.pro</li>
<li>proguard-retrofit.pro</li>
<li>proguard-okhttp.pro</li>
<li>proguard-glide.pro</li>
<li>proguard-gson.pro</li>
</ul>
<p>모듈 수준의 <code>build.gradle</code>에 프로가드 설정파일을 추가합니다.</p>
<figure class="highlight plaintext"><figcaption><span>수준의 build.gradle</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        debug &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        release &#123;</span><br><span class="line">            proguardFile getDefaultProguardFile(&#x27;proguard-android-optimize.txt&#x27;)</span><br><span class="line">            // 공통</span><br><span class="line">            proguardFile &#x27;proguard-common.pro&#x27;</span><br><span class="line">            // Retrofit을 위한 프로가드 설정파일</span><br><span class="line">            proguardFile &#x27;proguard-retrofit.pro&#x27;</span><br><span class="line">            // OkHttp를 위한 프로가드 설정파일</span><br><span class="line">            proguardFile &#x27;proguard-okhttp.pro&#x27;</span><br><span class="line">            // Glide를 위한 프로가드 설정파일</span><br><span class="line">            proguardFile &#x27;proguard-glide.pro&#x27;</span><br><span class="line">            // Gson 위한 프로가드 설정파일</span><br><span class="line">            proguardFile &#x27;proguard-gson.pro&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                    
                        


                    
                    
                        <p>
                            <a
                                href="/ko/2019/06/05/08_android/01_android_platform/190605_proguard/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/ko/2019/06/04/08_android/01_android_platform/190604_decompile_apk/"
                            aria-label=": [Android] APK 디컴파일 하기 (jadx)"
                        >
                            [Android] APK 디컴파일 하기 (jadx)
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-06-04T01:00:00+09:00">
	
		    2019/06/04
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/ko/categories/Android/">Android</a>, <a class="category-link" href="/ko/categories/Android/Android-Platform/">Android Platform</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <hr>
<h1 id="역공학과-디컴파일"><a href="#역공학과-디컴파일" class="headerlink" title="역공학과 디컴파일"></a>역공학과 디컴파일</h1><p><code>역공학(Reverse Engineering)</code>은 <u>완성된 결과물을 반대로 분해하고 조각내어 설계와 원리를 분석하는 것</u>을 의미합니다. 비유하자면 완성된 비행기를 분해하며 어떻게 조립되었고 동작하는지를 분석하는 것입니다.</p>
<p>소프트웨어 공학에서 역공학의 핵심 기술은 디컴파일입니다. <code>디컴파일(Decompile)</code>은 <u>실행 가능한 소프트웨어를 사람이 읽을 수 있는 소스코드로 변환하는 것</u>을 말합니다. 안드로이드에서는 APK 파일을 사용하여 소스코드 파일로 복원하는 작업을 의미합니다. 컴파일이나 빌드의 반대 작업이라고 이해하시면 됩니다.</p>
<h1 id="jadx"><a href="#jadx" class="headerlink" title="jadx"></a>jadx</h1><p><code>jadx</code>를 사용하면 APK 파일을 디컴파일 할 수 있습니다.</p>
<h3 id="1-설치"><a href="#1-설치" class="headerlink" title="(1) 설치"></a>(1) 설치</h3><p>Mac OS 환경을 기준으로 설명합니다. 적절한 위치에 <code>jadx</code>디렉토리를 생성하고 해당 디렉토리로 이동합니다.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mkdir jadx</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> jadx</span></span><br></pre></td></tr></table></figure>
<p>깃헙에서 <code>jadx</code>를 다운로드합니다.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/skylot/jadx.git .</span></span><br></pre></td></tr></table></figure>
<p><code>jadx</code>를 컴파일합니다.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./gradlew dist</span></span><br></pre></td></tr></table></figure>

<h3 id="2-실행"><a href="#2-실행" class="headerlink" title="(2) 실행"></a>(2) 실행</h3><p><code>jadx</code> 실행파일은 <code>jadx/build/bin/jadx-gui</code>입니다. <code>jadx</code>를 실행합니다.</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> build/jadx/bin</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ./jadx-gui</span></span><br></pre></td></tr></table></figure>
<p>디컴파일할 APK 파일을 선택합니다.<br><img src="1.png"><br>디컴파일된 소스 코드를 확인할 수 있습니다.<br><img src="2.png"></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/ko/2019/06/04/08_android/01_android_platform/190604_decompile_apk/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/ko/2019/06/03/08_android/01_android_platform/190603_analyze_apk/"
                            aria-label=": [Android] APK 분석하기 (APK Analyzer)"
                        >
                            [Android] APK 분석하기 (APK Analyzer)
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-06-03T01:00:00+09:00">
	
		    2019/06/03
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/ko/categories/Android/">Android</a>, <a class="category-link" href="/ko/categories/Android/Android-Platform/">Android Platform</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <hr>
<p>안드로이드 스튜디오의 <code>APK Analyzer</code>를 사용하면 APK 파일을 분석할 수 있습니다.</p>
<h1 id="APK-Analyzer"><a href="#APK-Analyzer" class="headerlink" title="APK Analyzer"></a>APK Analyzer</h1><p><code>Android Studio &gt; Build &gt; Analyze APK</code>를 선택합니다.</p>
<p><img src="1.png"><br>APK 파일을 선택하면 분석 정보를 확인할 수 있습니다.<br><img src="2.png"></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/ko/2019/06/03/08_android/01_android_platform/190603_analyze_apk/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/ko/2019/06/02/08_android/01_android_platform/190602_extract_apk/"
                            aria-label=": [Android] 앱에서 APK 추출하기 (APK Extractor)"
                        >
                            [Android] 앱에서 APK 추출하기 (APK Extractor)
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-06-02T01:00:00+09:00">
	
		    2019/06/02
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/ko/categories/Android/">Android</a>, <a class="category-link" href="/ko/categories/Android/Android-Platform/">Android Platform</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <hr>
<h1 id="들어가며"><a href="#들어가며" class="headerlink" title="들어가며"></a>들어가며</h1><p>구글 플레이스토어에는 설치된 앱에서 <code>APK</code> 파일을 추출하는 앱들이 출시되어있습니다. 이번 포스트에서는 <code>APK Extractor</code> 앱을 사용하여 APK 파일을 추출해보겠습니다.</p>
<h1 id="APK-Extractor"><a href="#APK-Extractor" class="headerlink" title="APK Extractor"></a>APK Extractor</h1><p>구글 플레이스토어에서 APK Extractor를 설치합니다.<br><img src="1.png"><br>검색창에 추출하려는 앱의 이름을 입력합니다.<br><img src="2.png"><br>앱을 클릭하면 해당 경로에 APK 파일이 추출됩니다.<br><img src="3.png"></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/ko/2019/06/02/08_android/01_android_platform/190602_extract_apk/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/ko/2019/06/01/08_android/01_android_platform/190601_dex_apk/"
                            aria-label=": [Android] APK 파일, DEX 파일이란?"
                        >
                            [Android] APK 파일, DEX 파일이란?
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-06-01T01:00:00+09:00">
	
		    2019/06/01
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/ko/categories/Android/">Android</a>, <a class="category-link" href="/ko/categories/Android/Android-Platform/">Android Platform</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <hr>
<h1 id="APK"><a href="#APK" class="headerlink" title="APK"></a>APK</h1><p><code>APK(Android Application Package)</code>는 안드로이드 어플리캐이션 설치 파일이다. 안드로이드 시스템에서 APK 파일을 사용하여 어플리케이션을 설치할 수 있다. Windows 계열의 운영체제에서의 인스톨러와 유사하다.</p>
<h1 id="APK-생성-과정"><a href="#APK-생성-과정" class="headerlink" title="APK 생성 과정"></a>APK 생성 과정</h1><p>APK 파일은 다음과 같은 과정을 거쳐 생성된다.</p>
<ol>
<li>안드로이드 프로젝트는 <code>소스코드 및 리소스로 구성된 모듈</code>과 <code>의존성</code>으로 구성된다.</li>
<li>Gradle은 이 모든 것을 빌드하여 <code>DEX 파일</code>과 <code>컴파일된 리소스</code>를 생성한다.</li>
<li>APK Manager는 개인키로 서명하여 <code>APK 파일</code>를 생성한다.</li>
<li><code>APK 파일</code>은 구글 플레이스토어에 업로드하거나 안드로이드 시스템에 직접 설치할 수 있다.</li>
</ol>
<p><img src="1.png"></p>
<h1 id="APK-생성-위치"><a href="#APK-생성-위치" class="headerlink" title="APK 생성 위치"></a>APK 생성 위치</h1><p>디버그 모드에서 앱을 빌드하면 아래 경로에 APK 파일이 생성된다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[your_project]\app\build\outputs\apk</span><br></pre></td></tr></table></figure>

<h1 id="DEX-파일"><a href="#DEX-파일" class="headerlink" title="DEX 파일"></a>DEX 파일</h1><p><code>APK</code>이 설치 파일이라면 <code>DEX(Dalvik Executable)</code>은 실행 파일입니다. Java 클래스 파일(.class)이 JVM에서 실행되는 것처럼 DEX 파일은 DVM(Dalvik Virtual Machine)에서 실행됩니다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/ko/2019/06/01/08_android/01_android_platform/190601_dex_apk/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/ko/2019/05/13/08_android/02_ui/190513_custom_view/"
                            aria-label=": [Android] 커스텀 위젯 만들기 - (2) View의 생명주기와 Custom View"
                        >
                            [Android] 커스텀 위젯 만들기 - (2) View의 생명주기와 Custom View
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-05-13T01:00:00+09:00">
	
		    2019/05/13
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/ko/categories/Android/">Android</a>, <a class="category-link" href="/ko/categories/Android/UI/">UI</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <hr>
<h1 id="View의-생명주기"><a href="#View의-생명주기" class="headerlink" title="View의 생명주기"></a>View의 생명주기</h1><p><code>Activity</code>와 <code>Fragment</code>처럼 <code>View</code>도 생명주기가 있습니다. <code>Custom View</code>를 만드려면 <code>View</code>의 생명주기를 이해해야합니다.<br><img src="1.png"><br>생명주기 함수에서 중요한 것은 <code>onMeasure()</code>, <code>onLayout()</code>, <code>onDraw()</code> 입니다.</p>
<h3 id="1-measure-onMeasure"><a href="#1-measure-onMeasure" class="headerlink" title="(1) measure(), onMeasure()"></a>(1) measure(), onMeasure()</h3><p><code>LinearLayout</code>, <code>ConstraintLayout</code> 같은 <code>ViewGroup</code>은 자식 뷰를 가질 수 있으며, 보통 두 가지 방법으로 자식 뷰를 추가합니다.</p>
<ul>
<li>코드에서 자식 뷰 추가<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> button = Button(<span class="keyword">this</span>)</span><br><span class="line">addView(button)</span><br></pre></td></tr></table></figure></li>
<li>레이아웃 XML 파일에서 추가<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:text</span>=<span class="string">&quot;Button&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>이때 부모 뷰는 내부적으로 자식 뷰의 <code>measure()</code>를 호출합니다.  이때 부모 뷰는 자식 뷰의 대략적인 크기 정보를 함께 전달해야합니다. 자식 뷰의 크기는 부모 뷰에 따라 달라질 수 있기 때문입니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">button.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED)</span><br></pre></td></tr></table></figure>
<p><code>MeasureSpec</code>가 가질 수 있는 값은 다음과 같습니다. </p>
<ul>
<li><code>MeasureSpec.AT_MOST</code>: 자식 뷰의 크기를 <code>wrap_content</code>로 설정했을 때</li>
<li><code>MeasureSpec.EXACTLY</code>: 자식 뷰의 크기를 <code>match_parent</code>로 설정했을 때</li>
<li><code>MeasureSpec.UNSPECIFIED</code>: 자식 뷰의 크기를 <code>30dp</code> 등으로 직접 설정했을 때</li>
</ul>
<p>부모 뷰가 <code>measure()</code>를 호출하면 자식 뷰의 <code>onMeasure()</code> 메소드가 호출됩니다. <code>onMeasure()</code>에서는 <code>setMeasuredDimension()</code>를 호출하여 자식 뷰의 크기를 결정하게 됩니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildView</span>: <span class="type">View &#123;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ..</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onMeasure</span><span class="params">(widthMeasureSpec: <span class="type">Int</span>, heightMeasureSpec: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec)</span><br><span class="line">        <span class="comment">// 자식 뷰의 크기를 가로 500, 세로 500으로 설정</span></span><br><span class="line">        setMeasuredDimension(<span class="number">500</span>, <span class="number">500</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>요약하자면 <code>measure()</code>와 <code>onMeasure()</code>는 자식 뷰의 <u>크기</u>를 결정하는데 사용됩니다.</p>
<h3 id="2-layout-onLayout"><a href="#2-layout-onLayout" class="headerlink" title="(2) layout(), onLayout()"></a>(2) layout(), onLayout()</h3><p>이제 자식 뷰가 부모 뷰의 어디에 <u>위치</u>할지를 결정해야합니다. 이때 부모 뷰는 내부적으로 자식 뷰의 <code>layout()</code>을 호출합니다. 또한 자식 뷰의 위치를 매개변수로 함께 전달합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">childView.layout(left: <span class="number">100</span>, top: <span class="number">100</span>, right: <span class="number">100</span>, bottom: <span class="number">100</span>)</span><br></pre></td></tr></table></figure>
<p>부모 뷰가 자식 뷰의 <code>layout()</code>을 호출하면 자식 뷰의 <code>onLayout()</code>이 호출됩니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildView</span>: <span class="type">View &#123;</span></span></span><br><span class="line">    <span class="comment">// ..</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> void onLayout(boolean changed, int left, int top, int right, int bottom) &#123;</span><br><span class="line">        <span class="comment">// ..</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>만약 뷰를 다시 그렸다면 첫 번째 인자인 <code>changed</code>를 통해 변화를 확인할 수 있습니다.</p>
<h3 id="3-draw-onDraw"><a href="#3-draw-onDraw" class="headerlink" title="(3) draw(), onDraw()"></a>(3) draw(), onDraw()</h3><p>자식 뷰의 크기와 위치가 결정되면 부모 뷰는 내부적으로 자식 뷰의 <code>draw()</code>를 호출합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">childView.draw(canvas)</span><br></pre></td></tr></table></figure>
<p>이제 자식 뷰의 <code>onDraw()</code>가 호출되며, 이 안에서 <code>Canvas</code>를 통해 뷰를 그릴 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildView</span>: <span class="type">View &#123;</span></span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onDraw</span><span class="params">(canvas: <span class="type">Canvas</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onDraw(canvas)</span><br><span class="line">        <span class="comment">// 그리기 </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Custom-View-구현하기"><a href="#Custom-View-구현하기" class="headerlink" title="Custom View 구현하기"></a>Custom View 구현하기</h1><p>이제 <code>Custom View</code>를 직접 구현해보겠습니다. <code>CircleView</code>라는 뷰를 정의합시다. 이 뷰는 원을 그려줍니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CircleView</span>: <span class="type">View &#123;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(context: Context): <span class="keyword">super</span>(context) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(context: Context, attrs: AttributeSet): <span class="keyword">super</span>(context, attrs) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Custom View</code>를 구현할 때는 두 개의 생성자를 반드시 선언해야합니다. 첫 번째 생성자는 <code>Context</code>객체를 인자로 받으며, 코드에서 뷰를 생성할 때 사용됩니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(context: Context): <span class="keyword">super</span>(context) &#123;</span><br><span class="line">    <span class="comment">// ..</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>두 번째 생성자는 <code>Context</code>객체 외에도 <code>AttributeSet</code>을 인자로 받으며, 레이아웃 파일에서 뷰를 생성할 때 사용합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(context: Context, attrs: AttributeSet): <span class="keyword">super</span>(context, attrs) &#123;</span><br><span class="line">    <span class="comment">// ..</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이제 <code>onDraw()</code>와 <code>onMeasure()</code>를 구현합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CircleView</span>: <span class="type">View &#123;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> paint = Paint()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(context: Context): <span class="keyword">super</span>(context) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(context: Context, attrs: AttributeSet): <span class="keyword">super</span>(context, attrs) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onMeasure</span><span class="params">(widthMeasureSpec: <span class="type">Int</span>, heightMeasureSpec: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec)</span><br><span class="line">        <span class="comment">// 뷰의 크기를 가로 400, 세로 400으로 지정</span></span><br><span class="line">        setMeasuredDimension(<span class="number">400</span>, <span class="number">400</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onDraw</span><span class="params">(canvas: <span class="type">Canvas</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onDraw(canvas)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Canvas의 배경을 회색으로 설정</span></span><br><span class="line">        canvas?.drawColor(Color.GRAY)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 중심 좌표가 (200, 200)이고 반지름이 200인 원을 그린다.</span></span><br><span class="line">        paint.color = Color.BLUE</span><br><span class="line">        canvas?.drawCircle(<span class="number">200F</span>, <span class="number">200F</span>, <span class="number">200F</span>, paint)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>부모 뷰의 레이아웃 파일에 <code>FigureView</code>를 추가합니다.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.yologger.project.CircleView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>앱을 실행하면 다음과 같습니다. <code>Canvas</code>는 회색, 원은 파란색입니다.<br><img src="2.png"></p>
<h1 id="커스텀-속성-추가하기"><a href="#커스텀-속성-추가하기" class="headerlink" title="커스텀 속성 추가하기"></a>커스텀 속성 추가하기</h1><p>원의 색상과 크기를 설정할 수 있도록 커스텀 속성을 추가하겠습니다. 우선 <code>res &gt; values</code>에 <code>attrs.xml</code> 파일을 생성합니다.</p>
<figure class="highlight xml"><figcaption><span>attrs.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">declare-styleable</span> <span class="attr">name</span>=<span class="string">&quot;FigureView&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;radius&quot;</span> <span class="attr">format</span>=<span class="string">&quot;dimension&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;figureColor&quot;</span> <span class="attr">format</span>=<span class="string">&quot;color&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">declare-styleable</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>액티비티의 레이아웃 파일을 수정합니다.</p>
<figure class="highlight xml"><figcaption><span>activity_main.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.yologger.project.CircleView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:figureColor</span>=<span class="string">&quot;#FF0000&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:radius</span>=<span class="string">&quot;100dp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.yologger.project.CircleView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:figureColor</span>=<span class="string">&quot;#FFC107&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:radius</span>=<span class="string">&quot;50dp&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>CircleView</code> 파일을 수정합니다.</p>
<figure class="highlight kotlin"><figcaption><span>FigureView.kt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yologger.project</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> android.content.Context</span><br><span class="line"><span class="keyword">import</span> android.content.res.TypedArray</span><br><span class="line"><span class="keyword">import</span> android.graphics.Canvas</span><br><span class="line"><span class="keyword">import</span> android.graphics.Color</span><br><span class="line"><span class="keyword">import</span> android.graphics.Paint</span><br><span class="line"><span class="keyword">import</span> android.util.AttributeSet</span><br><span class="line"><span class="keyword">import</span> android.view.View</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CircleView</span>: <span class="type">View &#123;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> paint = Paint()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> color: <span class="built_in">Int</span> = Color.TRANSPARENT</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> radius: <span class="built_in">Float</span> = <span class="number">0F</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> centerX: <span class="built_in">Float</span> = <span class="number">0.0f</span></span><br><span class="line">        <span class="keyword">get</span>() &#123;</span><br><span class="line">            <span class="keyword">return</span> radius</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> centerY: <span class="built_in">Float</span> = <span class="number">0.0f</span></span><br><span class="line">        <span class="keyword">get</span>() &#123;</span><br><span class="line">            <span class="keyword">return</span> radius</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(context: Context): <span class="keyword">super</span>(context) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(context: Context, attrs: AttributeSet): <span class="keyword">super</span>(context, attrs) &#123;</span><br><span class="line">        <span class="keyword">val</span> typedArray: TypedArray = context.obtainStyledAttributes(attrs, R.styleable.FigureView)</span><br><span class="line">        color = typedArray.getColor(R.styleable.FigureView_figureColor, Color.TRANSPARENT)</span><br><span class="line">        radius = typedArray.getDimension(R.styleable.FigureView_radius, <span class="number">0.0f</span>)</span><br><span class="line">        typedArray.recycle()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onMeasure</span><span class="params">(widthMeasureSpec: <span class="type">Int</span>, heightMeasureSpec: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onMeasure(widthMeasureSpec, heightMeasureSpec)</span><br><span class="line">        setMeasuredDimension((centerX*<span class="number">2</span>).toInt(), (centerY*<span class="number">2</span>).toInt());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onDraw</span><span class="params">(canvas: <span class="type">Canvas</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onDraw(canvas)</span><br><span class="line">        paint.color = color</span><br><span class="line">        canvas?.drawColor(Color.GRAY)</span><br><span class="line">        canvas?.drawCircle(centerX, centerX, radius, paint)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이제 앱을 실행합니다.<br><img src="3.png"></p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/ui/custom-components">안드로이드 공식문서</a>에 가시면 <code>커스텀 뷰</code>에 대한 더 자세한 내용을 확인하실 수 있습니다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/ko/2019/05/13/08_android/02_ui/190513_custom_view/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/ko/2019/05/12/08_android/02_ui/190512_compound_view/"
                            aria-label=": [Android] 커스텀 위젯 만들기 - (1) Compound View"
                        >
                            [Android] 커스텀 위젯 만들기 - (1) Compound View
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-05-12T01:00:00+09:00">
	
		    2019/05/12
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/ko/categories/Android/">Android</a>, <a class="category-link" href="/ko/categories/Android/UI/">UI</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <hr>
<h1 id="커스텀-위젯"><a href="#커스텀-위젯" class="headerlink" title="커스텀 위젯"></a>커스텀 위젯</h1><p>안드로이드에서는 UI 구성을 위한 <code>뷰(View)</code>를 제공합니다. <code>TextView</code>, <code>EditText</code>, <code>Button</code>과 같은 위젯과 <code>LinearLayout</code>, <code>ConstraintLayout</code>같은 <code>뷰 그룹(ViewGroup)</code>이 대표적입니다.</p>
<p>안드로이드에서는 기본으로 제공하는 위젯 외에도 직접 커스텀 위젯을 만들 수 있습니다. 커스텀 위젯을 만드는 방법에는 크게 두 가지가 있습니다.</p>
<ul>
<li><code>Compound View</code></li>
<li><code>Custom View</code></li>
</ul>
<p>이번 포스트에서는 <code>Compound View</code>에 대해 알아보겠습니다.</p>
<h1 id="Compound-View"><a href="#Compound-View" class="headerlink" title="Compound View"></a>Compound View</h1><p><code>Compound View</code>는 <code>ViewGroup</code>과 기존 <code>View</code>를 조합하여 새로운 뷰를 구성합니다. 예제에서는 다음과 같은 <code>PostView</code>를 구현하겠습니다.<br><img src="1.png"></p>
<p><code>Compound View</code>를 만들기 위해서는 별도의 레이아웃 XML 파일을 구성해야합니다.</p>
<figure class="highlight xml"><figcaption><span>view_post.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:padding</span>=<span class="string">&quot;16dp&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/view_post_iv_avatar&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;75dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;75dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_alignParentLeft</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_centerVertical</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">&quot;@+id/view_post_tv_writer&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_toRightOf</span>=<span class="string">&quot;@+id/view_post_iv_avatar&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginLeft</span>=<span class="string">&quot;16dp&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_centerVertical</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/view_post_tv_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>이제 <code>view_post.xml</code>의 루트 뷰인 <code>LinearLayout</code>을 상속하는 <code>PostView</code> 클래스를 정의합니다.</p>
<figure class="highlight kotlin"><figcaption><span>PostView.kt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PostView</span>: <span class="type">LinearLayout &#123;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> mImageViewAvatar: ImageView</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> mTextViewWriter: TextView</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> mTextViewContent: TextView</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(context: Context): <span class="keyword">super</span>(context) &#123;</span><br><span class="line">        inflateView()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(context: Context, attrs: AttributeSet): <span class="keyword">super</span>(context, attrs) &#123;</span><br><span class="line">        inflateView()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">inflateView</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> view = inflate(context, R.layout.view_post, <span class="keyword">this</span>)</span><br><span class="line">        mImageViewAvatar = view.findViewById(R.id.view_post_iv_avatar)</span><br><span class="line">        mTextViewWriter = view.findViewById(R.id.view_post_tv_writer)</span><br><span class="line">        mTextViewContent = view.findViewById(R.id.view_post_tv_content)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Compound View</code>를 구성할 때는 기본적으로 두 개의 생성자를 반드시 정의해야합니다. 첫 번째 생성자는 코드에서 동적으로 <code>View</code>를 생성할 때 호출됩니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(context: Context): <span class="keyword">super</span>(context) &#123;</span><br><span class="line">    inflateView()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>두 번째 생성자는 <code>Layout Editor</code>에서 <code>View</code>를 생성할 때 호출됩니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(context: Context, attrs: AttributeSet): <span class="keyword">super</span>(context, attrs) &#123;</span><br><span class="line">    inflateView()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>View</code>클래스에는 <code>inflate()</code> 함수가 정의되어있습니다. 이 함수는 XML 리소스에서 뷰를 <code>인플레이트</code>합니다. <code>inflateView()</code>함수에서 <code>inflate()</code>를 호출하여 뷰를 <code>인플레이트</code>합시다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">inflateView</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> view = inflate(context, R.layout.view_post, <span class="keyword">this</span>)</span><br><span class="line">    mImageViewAvatar = view.findViewById(R.id.view_post_iv_avatar)</span><br><span class="line">    mTextViewWriter = view.findViewById(R.id.view_post_tv_writer)</span><br><span class="line">    mTextViewContent = view.findViewById(R.id.view_post_tv_content)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이제 <code>activity_main.xml</code>에서 <code>PostView</code>를 다음과 같이 사용할 수 있습니다.</p>
<figure class="highlight xml"><figcaption><span>activity_main.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.yologger.project.PostView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="커스텀-속성-추가하기"><a href="#커스텀-속성-추가하기" class="headerlink" title="커스텀 속성 추가하기"></a>커스텀 속성 추가하기</h1><p><code>ImageView</code>는 <code>src</code>속성으로 보여줄 이미지를 설정할 수 있습니다.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;75dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;75dp&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:src</span>=<span class="string">&quot;@drawable/your_image&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>TextView</code>도  <code>text</code> 속성으로 보여줄 문자열을 설정할 수 있습니다.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">&quot;Your Text&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>이처럼 <code>Compound Widget</code>에도 사용자 정의 속성을 추가할 수 있습니다. </p>
<p>이제 아바타 이미지를 설정하는 <code>avatarSrc</code>, 글쓴이를 설정하는 <code>writerText</code>, 본문을 설정하는 <code>contentWriter</code> 속성을 추가하겠습니다. 커스텀 속성을 추가하려면 <code>res &gt; values</code> 아래에 <code>attrs.xml</code>을 생성하고 다음과 같이 작성합니다.</p>
<figure class="highlight xml"><figcaption><span>attrs.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">declare-styleable</span> <span class="attr">name</span>=<span class="string">&quot;PostView&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;avatarSrc&quot;</span> <span class="attr">format</span>=<span class="string">&quot;reference&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;writerText&quot;</span> <span class="attr">format</span>=<span class="string">&quot;string&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">&quot;contentText&quot;</span> <span class="attr">format</span>=<span class="string">&quot;string&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">declare-styleable</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>이제 <code>activity_main.xml</code>에서 위 속성들을 사용할 수 있습니다.</p>
<figure class="highlight xml"><figcaption><span>activity_main.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.yologger.project.PostView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:avatarSrc</span>=<span class="string">&quot;@drawable/paul_image&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:writerText</span>=<span class="string">&quot;Paul&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:contentText</span>=<span class="string">&quot;Hello. My name is Paul. Nice to meet you.&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>다음은 <code>PostView</code> 클래스를 다음과 같이 수정합니다.</p>
<figure class="highlight kotlin"><figcaption><span>PostView.kt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PostView</span>: <span class="type">LinearLayout &#123;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> mImageViewAvatar: ImageView</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> mTextViewWriter: TextView</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> mTextViewContent: TextView</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(context: Context): <span class="keyword">super</span>(context) &#123;</span><br><span class="line">        inflateView()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(context: Context, attrs: AttributeSet): <span class="keyword">super</span>(context, attrs) &#123;</span><br><span class="line">        inflateView()</span><br><span class="line">        applyAttrs()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">inflateView</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> view = inflate(context, R.layout.view_post, <span class="keyword">this</span>)</span><br><span class="line">        mImageViewAvatar = view.findViewById(R.id.view_post_iv_avatar)</span><br><span class="line">        mTextViewWriter = view.findViewById(R.id.view_post_tv_writer)</span><br><span class="line">        mTextViewContent = view.findViewById(R.id.view_post_tv_content)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">applyAttrs</span><span class="params">(attrs: <span class="type">AttributeSet</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> typedArray: TypedArray = context.obtainStyledAttributes(attrs, R.styleable.PostView)</span><br><span class="line">        <span class="keyword">val</span> avatarSrc = typedArray.getResourceId(R.styleable.PostView_avatarSrc, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">val</span> writerText = typedArray.getText(R.styleable.PostView_writerText)</span><br><span class="line">        <span class="keyword">val</span> contentText = typedArray.getText(R.styleable.PostView_contentText)</span><br><span class="line">        typedArray.recycle()</span><br><span class="line"></span><br><span class="line">        mImageViewAvatar.setImageResource(avatarSrc)</span><br><span class="line">        mTextViewWriter.text = writerText</span><br><span class="line">        mTextViewContent.text = contentText</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Context</code>의 <code>obtainStyledAttributes()</code>를 호출하면 <code>TypeArray</code> 타입의 객체를 반환합니다. 이 객체에는 레이아웃 XML 파일에서 추가한 속성값들이 저장되어있으며 <code>getResourceId()</code>, <code>getText()</code> 등의 메소드로 속성값을 추출할 수 있습니다. <code>TypedArray</code>객체를 사용한 후에는 <code>recycle()</code>을 호출하여 자원을 해제합니다.</p>
<p>마지막으로 코드로 <code>Compound View</code>를 생성할 때 속성값을 설정하는 코드를 추가합니다.</p>
<figure class="highlight kotlin"><figcaption><span>PostView.kt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PostView</span>: <span class="type">LinearLayout &#123;</span></span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> mImageViewAvatar: ImageView</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> mTextViewWriter: TextView</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> mTextViewContent: TextView</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ..</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">setAvatarImage</span><span class="params">(<span class="meta">@DrawableRes</span> resId: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        mImageViewAvatar.setImageResource(resId)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">setWriter</span><span class="params">(text: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">        mTextViewWriter.text = text</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">setContext</span><span class="params">(text: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">        mTextViewContent.text = text</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                    
                        


                    
                    
                        <p>
                            <a
                                href="/ko/2019/05/12/08_android/02_ui/190512_compound_view/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/ko/2019/05/11/08_android/02_ui/190511_canvas_paint/"
                            aria-label=": [Android] 화면에 그림 그리기 - Canvas, Paint"
                        >
                            [Android] 화면에 그림 그리기 - Canvas, Paint
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2019-05-11T01:00:00+09:00">
	
		    2019/05/11
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/ko/categories/Android/">Android</a>, <a class="category-link" href="/ko/categories/Android/UI/">UI</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <hr>
<h1 id="들어가며"><a href="#들어가며" class="headerlink" title="들어가며"></a>들어가며</h1><p><code>Canvas</code>와 <code>Paint</code>를 사용하면 화면에 원하는 그림을 그릴 수 있습니다. </p>
<h1 id="Canvas"><a href="#Canvas" class="headerlink" title="Canvas"></a>Canvas</h1><p><code>Canvas</code>는 도화지입니다. <code>Canvas</code>는 <code>Bitmap</code>을 통해 생성됩니다. <code>Bitmap</code>은 <code>createBitmap()</code>을 통해 생성하며 매개변수는 다음과 같습니다.</p>
<ul>
<li><code>witdh</code>: 가로 길이</li>
<li><code>height</code>: 세로 길이</li>
<li><code>config</code>: 보통 <code>Bitmap.Config.ARGB_8888</code> 값을 넣습니다. 한 픽셀은 4바이트로 저장되며, 각 바이트는 <code>Alpha</code>, <code>Red</code>, <code>Green</code>, <code>Blue</code>를 의미합니다. 1바이트는 256개의 값을 표현할 수 있습니다.</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.graphics.Bitmap</span><br><span class="line"></span><br><span class="line"><span class="comment">// 가로 800, 세로 800의 비트맵 생성</span></span><br><span class="line"><span class="keyword">val</span> bitmap = Bitmap.createBitmap(<span class="number">800</span>, <span class="number">800</span>, Bitmap.Config.ARGB_8888)</span><br></pre></td></tr></table></figure>
<p><code>Bitmap</code>을 사용하여 <code>Canvas</code>를 생성합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> android.graphics.Canvas</span><br><span class="line"></span><br><span class="line"><span class="comment">// Canvas 생성</span></span><br><span class="line"><span class="keyword">val</span> canvas = Canvas(bitmap)</span><br></pre></td></tr></table></figure>
<p><code>Canvas</code>의 배경화면은 기본적으로 투명색입니다. <code>Canvas</code>의 색상을 회색으로 변경하겠습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Canvas의 Background 설정</span></span><br><span class="line">canvas.drawColor(Color.GRAY)</span><br></pre></td></tr></table></figure>
<p>이제 <code>Canvas</code>를 <code>ImageView</code>에 표시하겠습니다.</p>
<figure class="highlight xml"><figcaption><span>activity_main.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:tools</span>=<span class="string">&quot;http://schemas.android.com/tools&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">&quot;match_parent&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">&quot;vertical&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:gravity</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">tools:context</span>=<span class="string">&quot;.MainActivity&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">&quot;@+id/activity_main_iv&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">&quot;wrap_content&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">&quot;wrap_content&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight kotlin"><figcaption><span>MainActivity.kt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> : <span class="type">AppCompatActivity</span></span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> imageView: ImageView <span class="keyword">by</span> lazy &#123; findViewById(R.id.activity_main_iv) &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_main)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> bitmap = Bitmap.createBitmap(<span class="number">800</span>, <span class="number">800</span>, Bitmap.Config.ARGB_8888)</span><br><span class="line">        <span class="keyword">val</span> canvas = Canvas(bitmap)</span><br><span class="line">        canvas.drawColor(Color.GRAY)</span><br><span class="line"></span><br><span class="line">        imageView.setImageBitmap(bitmap)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>앱을 실행해봅시다.<br><img src="1.png"></p>
<h1 id="Paint"><a href="#Paint" class="headerlink" title="Paint"></a>Paint</h1><p><code>Canvas</code>가 도화지라면 <code>Paint</code>는 물감입니다. <code>Paint</code>를 사용하면 <code>Canvas</code>위에 그림을 그릴 수 있습니다. <code>Paint</code>는 다음과 같이 생성합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> paint = Paint().apply &#123;</span><br><span class="line">    <span class="comment">// 페인트 색상</span></span><br><span class="line">    color = Color.BLUE</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 페인트 굵기</span></span><br><span class="line">    strokeWidth = <span class="number">30F</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="1-점-그리기"><a href="#1-점-그리기" class="headerlink" title="(1) 점 그리기"></a>(1) 점 그리기</h3><p><code>Canvas</code>에는 <code>Paint</code>로 그림을 그리기 위한 여러가지 메소드가 포함되있습니다. <code>drawPoint()</code>를 사용하여 <code>Canvas</code>에 점을 찍어보겠습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// x축 200, y축 200에 점을 그린다.</span></span><br><span class="line">canvas.drawPoint(<span class="number">200</span>, <span class="number">200</span>, paint)</span><br></pre></td></tr></table></figure>
<p>앱을 실행합시다.<br><img src="2.png"><br>완성된 코드는 다음과 같습니다.</p>
<figure class="highlight kotlin"><figcaption><span>MainActivity.kt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> : <span class="type">AppCompatActivity</span></span>() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> imageView: ImageView <span class="keyword">by</span> lazy &#123; findViewById(R.id.activity_main_iv) &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">        setContentView(R.layout.activity_main)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> bitmap = Bitmap.createBitmap(<span class="number">800</span>, <span class="number">800</span>, Bitmap.Config.ARGB_8888)</span><br><span class="line">        <span class="keyword">val</span> canvas = Canvas(bitmap)</span><br><span class="line">        canvas.drawColor(Color.GRAY)</span><br><span class="line"></span><br><span class="line">        imageView.setImageBitmap(bitmap)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> paint = Paint().apply &#123;</span><br><span class="line">            color = Color.BLUE</span><br><span class="line">            strokeWidth = <span class="number">30F</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        canvas.drawPoint(<span class="number">200F</span>, <span class="number">200F</span>, paint)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-직사각형-그리기"><a href="#2-직사각형-그리기" class="headerlink" title="(2) 직사각형 그리기"></a>(2) 직사각형 그리기</h3><p><code>Canvas</code>의 <code>drawRect()</code> 메소드를 사용하면 직사각형을 그릴 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> paint = Paint().apply &#123;</span><br><span class="line">    color = Color.BLUE</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">canvas.drawRect(<span class="number">100F</span>, <span class="number">100F</span>, <span class="number">300F</span>, <span class="number">300F</span>, paint)</span><br></pre></td></tr></table></figure>
<p><img src="3.png"></p>
<h3 id="3-원-그리기"><a href="#3-원-그리기" class="headerlink" title="(3) 원 그리기"></a>(3) 원 그리기</h3><p><code>Canvas</code>의 <code>drawArc()</code>를 사용하면 원을 그릴 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> paint = Paint().apply &#123;</span><br><span class="line">    color = Color.BLUE</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">canvas.drawCircle(<span class="number">100F</span>, <span class="number">100F</span>, <span class="number">50F</span>, paint)</span><br></pre></td></tr></table></figure>
<p><img src="4.png"></p>
<h3 id="4-텍스트-그리기"><a href="#4-텍스트-그리기" class="headerlink" title="(4) 텍스트 그리기"></a>(4) 텍스트 그리기</h3><p><code>Canvas</code>의 <code>drawText()</code>를 사용하면 텍스트를 그릴 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> paint = Paint().apply &#123;</span><br><span class="line">    color = Color.BLUE</span><br><span class="line">    textSize = <span class="number">50F</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">canvas.drawText(<span class="string">&quot;Hello World&quot;</span>, <span class="number">100F</span>, <span class="number">100F</span>, paint)</span><br></pre></td></tr></table></figure>
<p><img src="5.png"></p>
<h3 id="5-선-그리기"><a href="#5-선-그리기" class="headerlink" title="(5) 선 그리기"></a>(5) 선 그리기</h3><p><code>Canvas</code>의 <code>drawLine()</code>을 사용하면 선을 그릴 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> paint = Paint().apply &#123;</span><br><span class="line">    color = Color.BLUE</span><br><span class="line">    strokeWidth = <span class="number">5F</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">canvas.drawLine(<span class="number">100F</span>, <span class="number">100F</span>, <span class="number">700F</span>, <span class="number">700F</span>, paint)</span><br></pre></td></tr></table></figure>
<p><img src="6.png"></p>
<h3 id="6-경로"><a href="#6-경로" class="headerlink" title="(6) 경로"></a>(6) 경로</h3><p><code>Path</code>클래스와 <code>Canvas</code>의 <code>drawPath()</code>를 사용하면 그림을 그릴 경로를 지정할 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> paint = Paint().apply &#123;</span><br><span class="line">    color = Color.BLUE</span><br><span class="line">    strokeWidth = <span class="number">5F</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> path = Path().apply &#123;</span><br><span class="line">    <span class="comment">// 시작점 설정</span></span><br><span class="line">    moveTo(<span class="number">100F</span>, <span class="number">100F</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 경로 이동</span></span><br><span class="line">    lineTo(<span class="number">100F</span>, <span class="number">500F</span>)</span><br><span class="line">    lineTo(<span class="number">500F</span>, <span class="number">300F</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">canvas.drawPath(path, paint)</span><br></pre></td></tr></table></figure>
<p><img src="7.png"></p>
<h1 id="마치며"><a href="#마치며" class="headerlink" title="마치며"></a>마치며</h1><p><code>Canvas</code>에는 그림을 그리기 위한 다양한 메소드가 있습니다. <a target="_blank" rel="noopener" href="https://developer.android.com/reference/android/graphics/Canvas#drawArc(float,%20float,%20float,%20float,%20float,%20float,%20boolean,%20android.graphics.Paint)">공식 문서</a>에서 이 메소드들을 확인할 수 있습니다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/ko/2019/05/11/08_android/02_ui/190511_canvas_paint/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
          <li class="pagination-prev">
            <a
                class="btn btn--default btn--small"
                href="/ko/tags/Android/page/7/"
                aria-label="최근 포스트"
            >
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>최근 포스트</span>
            </a>
          </li>
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/ko/tags/Android/page/9/"
                aria-label="이전 포스트"
            >
              <span>이전 포스트</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 8 of 10</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 yologger. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">yologger</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/ko/assets/images/background.png');"></div>
        <!--SCRIPTS-->

<script src="/ko/assets/js/script-s1qf4dycbfqqmgvjljlv3c81jri2dhkbfsbrr18gdsntpulta4iextu4bozl.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
